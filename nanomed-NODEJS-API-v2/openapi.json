{
  "openapi": "3.0.3",
  "info": {
    "title": "Nanomed API v2",
    "description": "API REST para el sistema Nanomed - Gesti贸n m茅dica y administrativa integral\n\n## Caracter铆sticas Principales\n-  Autenticaci贸n JWT con MFA\n-  Sistema de roles multinivel (Usuario, M茅dico, Recepcionista, Admin)\n-  Gesti贸n completa de citas m茅dicas\n-  Sistema de horarios m茅dicos configurables\n-  Gesti贸n de ex谩menes m茅dicos\n-  Reportes y estad铆sticas en tiempo real\n-  Notificaciones autom谩ticas\n\n## Roles de Usuario\n- **user** - Usuario/Paciente: Gesti贸n personal de citas y ex谩menes\n- **medico** - M茅dico: Gesti贸n de pacientes y ex谩menes m茅dicos\n- **recepcionista** - Recepcionista: Gesti贸n integral de citas y pacientes\n- **admin** - Administrador: Control total del sistema\n\n**NOTA**: Los endpoints de conversaciones/mensajer铆a han sido eliminados del proyecto.\n",
    "version": "2.2.0",
    "contact": {
      "name": "Soporte Nanomed",
      "email": "soporte@nanomed.cl",
      "url": "https://nanomed.cl"
    },
    "license": {
      "name": "Privado y Confidencial",
      "url": "https://nanomed.cl/license"
    }
  },
  "servers": [
    {
      "url": "http://localhost:4000",
      "description": "Servidor de desarrollo"
    },
    {
      "url": "https://nanomed-nodejs-api-v2.azurewebsites.net",
      "description": "Servidor de producci贸n"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Token JWT obtenido del endpoint de login"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "nombre": {
            "type": "string"
          },
          "apellido": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "telefono": {
            "type": "string"
          },
          "rut": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "medico",
              "recepcionista",
              "admin"
            ]
          },
          "email_verified": {
            "type": "boolean"
          },
          "genero": {
            "type": "string",
            "enum": [
              "Masculino",
              "Femenino",
              "Otro"
            ]
          },
          "direccion": {
            "type": "string"
          },
          "ciudad": {
            "type": "string"
          },
          "region": {
            "type": "string"
          },
          "foto_perfil": {
            "type": "string"
          },
          "creado_en": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ApiResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean"
          },
          "status": {
            "type": "integer"
          },
          "body": {
            "type": "object"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "RegisterRequest": {
        "type": "object",
        "required": [
          "nombre",
          "apellido",
          "email",
          "password",
          "rut"
        ],
        "properties": {
          "nombre": {
            "type": "string"
          },
          "apellido": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string"
          },
          "rut": {
            "type": "string"
          },
          "telefono": {
            "type": "string"
          },
          "genero": {
            "type": "string"
          },
          "direccion": {
            "type": "string"
          },
          "ciudad": {
            "type": "string"
          },
          "region": {
            "type": "string"
          },
          "fecha_nacimiento": {
            "type": "string",
            "format": "date"
          }
        }
      }
    }
  },
  "paths": {
    "/api/auth/register": {
      "post": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Registrar nuevo usuario",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario registrado exitosamente"
          },
          "400": {
            "description": "Error en los datos"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Iniciar sesi贸n",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login exitoso"
          },
          "401": {
            "description": "Credenciales inv谩lidas"
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Cerrar sesi贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Sesi贸n cerrada exitosamente"
          }
        }
      }
    },
    "/api/auth/verify-email/{token}": {
      "get": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Verificar email",
        "security": [],
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Email verificado exitosamente"
          }
        }
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Solicitar restablecimiento de contrase帽a",
        "security": [],
        "responses": {
          "200": {
            "description": "Email de restablecimiento enviado"
          }
        }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Restablecer contrase帽a",
        "security": [],
        "responses": {
          "200": {
            "description": "Contrase帽a restablecida exitosamente"
          }
        }
      }
    },
    "/api/auth/check-password-strength": {
      "post": {
        "tags": [
          "Autenticaci贸n"
        ],
        "summary": "Verificar fortaleza de contrase帽a",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "An谩lisis de fortaleza de contrase帽a"
          }
        }
      }
    },
    "/api/users/me": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Obtener perfil propio",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Perfil del usuario"
          }
        }
      },
      "put": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Actualizar perfil propio",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Perfil actualizado correctamente"
          }
        }
      }
    },
    "/api/users/me/password": {
      "put": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Cambiar contrase帽a",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Contrase帽a actualizada"
          }
        }
      }
    },
    "/api/users/me/profile-picture": {
      "post": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Subir foto de perfil",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "profilePhoto": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Foto subida exitosamente"
          }
        }
      },
      "delete": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Eliminar foto de perfil",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Foto eliminada exitosamente"
          }
        }
      }
    },
    "/api/users/me/emergency-contacts": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Listar contactos de emergencia",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contactos de emergencia"
          }
        }
      },
      "post": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Agregar contacto de emergencia",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Contacto agregado exitosamente"
          }
        }
      }
    },
    "/api/users/me/emergency-contacts/{id}": {
      "put": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Actualizar contacto de emergencia",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Contacto actualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Eliminar contacto de emergencia",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Contacto eliminado"
          }
        }
      }
    },
    "/api/users/me/medical-info": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Obtener informaci贸n m茅dica",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Informaci贸n m茅dica del usuario"
          }
        }
      },
      "put": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Actualizar informaci贸n m茅dica",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Informaci贸n m茅dica actualizada"
          }
        }
      }
    },
    "/api/doctors": {
      "get": {
        "tags": [
          "M茅dicos"
        ],
        "summary": "Listar m茅dicos disponibles",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de m茅dicos"
          }
        }
      }
    },
    "/api/doctors/{id}": {
      "get": {
        "tags": [
          "M茅dicos"
        ],
        "summary": "Obtener m茅dico espec铆fico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Informaci贸n del m茅dico"
          }
        }
      }
    },
    "/api/doctors/specialties/{specialtyId}": {
      "get": {
        "tags": [
          "M茅dicos"
        ],
        "summary": "M茅dicos por especialidad",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "specialtyId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "M茅dicos de la especialidad"
          }
        }
      }
    },
    "/api/doctors/me/appointments": {
      "get": {
        "tags": [
          "M茅dicos"
        ],
        "summary": "Listar mis citas como m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de citas del m茅dico"
          }
        }
      }
    },
    "/api/doctors/me/appointments/{id}": {
      "get": {
        "tags": [
          "M茅dicos"
        ],
        "summary": "Obtener detalle de mi cita espec铆fica",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de la cita"
          }
        }
      }
    },
    "/api/doctors/me/appointments/{id}/status": {
      "put": {
        "tags": [
          "M茅dicos"
        ],
        "summary": "Actualizar estado de mi cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de cita actualizado"
          }
        }
      }
    },
    "/api/appointments": {
      "get": {
        "tags": [
          "Citas"
        ],
        "summary": "Listar citas propias",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de citas del usuario"
          }
        }
      },
      "post": {
        "tags": [
          "Citas"
        ],
        "summary": "Crear nueva cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Cita creada exitosamente"
          }
        }
      }
    },
    "/api/appointments/available-slots": {
      "get": {
        "tags": [
          "Citas"
        ],
        "summary": "Obtener horarios disponibles",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "medico_id",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fecha",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Horarios disponibles"
          }
        }
      }
    },
    "/api/appointments/{id}": {
      "put": {
        "tags": [
          "Citas"
        ],
        "summary": "Actualizar cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cita actualizada"
          }
        }
      },
      "delete": {
        "tags": [
          "Citas"
        ],
        "summary": "Cancelar cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cita cancelada"
          }
        }
      }
    },
    "/api/appointments/{id}/confirm": {
      "post": {
        "tags": [
          "Citas"
        ],
        "summary": "Confirmar asistencia a cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Asistencia confirmada"
          }
        }
      }
    },
    "/api/appointments/{id}/reschedule": {
      "post": {
        "tags": [
          "Citas"
        ],
        "summary": "Reprogramar cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nueva_fecha_hora": {
                    "type": "string",
                    "format": "date-time"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cita reprogramada"
          }
        }
      }
    },
    "/api/receptionists/appointments": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Listar todas las citas",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de todas las citas"
          }
        }
      },
      "post": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Crear cita para cualquier paciente",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Cita creada"
          }
        }
      }
    },
    "/api/receptionists/appointments/{id}": {
      "put": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Actualizar cualquier cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cita actualizada"
          }
        }
      },
      "delete": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Cancelar cualquier cita",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cita cancelada"
          }
        }
      }
    },
    "/api/receptionists/patients": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Listar todos los pacientes",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pacientes"
          }
        }
      }
    },
    "/api/receptionists/patients/{id}": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Informaci贸n detallada de paciente",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Informaci贸n del paciente"
          }
        }
      }
    },
    "/api/receptionists/doctors": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Listar todos los m茅dicos",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de m茅dicos"
          }
        }
      }
    },
    "/api/receptionists/doctors/{id}/availability": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Disponibilidad de m茅dico (legacy)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fecha",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Disponibilidad del m茅dico"
          }
        }
      }
    },
    "/api/receptionists/doctors/{id}/availability-updated": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Disponibilidad actualizada (usando horarios configurados)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fecha",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Disponibilidad basada en horarios configurados"
          }
        }
      }
    },
    "/api/receptionists/doctors/{id}/schedule": {
      "post": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Establecer horarios regulares del m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "horarios": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "dia_semana": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 6
                        },
                        "hora_inicio": {
                          "type": "string",
                          "format": "time"
                        },
                        "hora_fin": {
                          "type": "string",
                          "format": "time"
                        },
                        "duracion_cita": {
                          "type": "integer",
                          "default": 30
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Horarios establecidos exitosamente"
          }
        }
      },
      "get": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Consultar horarios configurados del m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Horarios configurados del m茅dico"
          }
        }
      }
    },
    "/api/receptionists/doctors/{id}/schedule/{scheduleId}": {
      "put": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Actualizar horario espec铆fico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Horario actualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Eliminar horario espec铆fico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Horario eliminado"
          }
        }
      }
    },
    "/api/receptionists/doctors/{id}/schedule/exceptions": {
      "post": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Agregar excepci贸n de horario",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fecha": {
                    "type": "string",
                    "format": "date"
                  },
                  "motivo": {
                    "type": "string"
                  },
                  "todo_el_dia": {
                    "type": "boolean",
                    "default": true
                  },
                  "hora_inicio": {
                    "type": "string",
                    "format": "time"
                  },
                  "hora_fin": {
                    "type": "string",
                    "format": "time"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Excepci贸n agregada"
          }
        }
      },
      "get": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Listar excepciones del m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fecha_desde",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de excepciones"
          }
        }
      }
    },
    "/api/receptionists/doctors/{id}/schedule/exceptions/{exceptionId}": {
      "delete": {
        "tags": [
          "Horarios M茅dicos"
        ],
        "summary": "Eliminar excepci贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "exceptionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Excepci贸n eliminada"
          }
        }
      }
    },
    "/api/receptionists/stats/daily": {
      "get": {
        "tags": [
          "Recepcionistas"
        ],
        "summary": "Estad铆sticas diarias",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "fecha",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estad铆sticas del d铆a"
          }
        }
      }
    },
    "/api/exams": {
      "get": {
        "tags": [
          "Ex谩menes"
        ],
        "summary": "Listar ex谩menes",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ex谩menes"
          }
        }
      },
      "post": {
        "tags": [
          "Ex谩menes"
        ],
        "summary": "Crear nuevo examen",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "archivo": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Examen creado"
          }
        }
      }
    },
    "/api/exams/{id}": {
      "get": {
        "tags": [
          "Ex谩menes"
        ],
        "summary": "Obtener examen espec铆fico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Informaci贸n del examen"
          }
        }
      },
      "put": {
        "tags": [
          "Ex谩menes"
        ],
        "summary": "Actualizar examen",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Examen actualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Ex谩menes"
        ],
        "summary": "Eliminar examen",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Examen eliminado"
          }
        }
      }
    },
    "/api/exams/{id}/file": {
      "get": {
        "tags": [
          "Ex谩menes"
        ],
        "summary": "Descargar archivo de examen",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Archivo del examen"
          }
        }
      }
    },
    "/api/specialties": {
      "get": {
        "tags": [
          "Especialidades"
        ],
        "summary": "Listar especialidades m茅dicas",
        "security": [],
        "responses": {
          "200": {
            "description": "Lista de especialidades"
          }
        }
      }
    },
    "/api/specialties/stats": {
      "get": {
        "tags": [
          "Especialidades"
        ],
        "summary": "Estad铆sticas de especialidades",
        "security": [],
        "responses": {
          "200": {
            "description": "Estad铆sticas de especialidades"
          }
        }
      }
    },
    "/api/specialties/{nombre}": {
      "get": {
        "tags": [
          "Especialidades"
        ],
        "summary": "Informaci贸n de especialidad espec铆fica",
        "security": [],
        "parameters": [
          {
            "name": "nombre",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Informaci贸n de la especialidad"
          }
        }
      }
    },
    "/api/search/doctors": {
      "get": {
        "tags": [
          "B煤squedas"
        ],
        "summary": "Buscar m茅dicos",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "especialidad",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "nombre",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "apellido",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados de b煤squeda"
          }
        }
      }
    },
    "/api/search/exams": {
      "get": {
        "tags": [
          "B煤squedas"
        ],
        "summary": "Buscar ex谩menes",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "tipo_examen",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fecha_desde",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados de b煤squeda"
          }
        }
      }
    },
    "/api/notifications": {
      "get": {
        "tags": [
          "Notificaciones"
        ],
        "summary": "Listar notificaciones del usuario",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limite",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "leida",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de notificaciones"
          }
        }
      }
    },
    "/api/notifications/{id}/read": {
      "put": {
        "tags": [
          "Notificaciones"
        ],
        "summary": "Marcar notificaci贸n como le铆da",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notificaci贸n marcada como le铆da"
          }
        }
      }
    },
    "/api/notifications/read-all": {
      "put": {
        "tags": [
          "Notificaciones"
        ],
        "summary": "Marcar todas las notificaciones como le铆das",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Todas las notificaciones marcadas como le铆das"
          }
        }
      }
    },
    "/api/notifications/{id}": {
      "delete": {
        "tags": [
          "Notificaciones"
        ],
        "summary": "Eliminar notificaci贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notificaci贸n eliminada"
          }
        }
      }
    },
    "/api/notifications/preferences": {
      "get": {
        "tags": [
          "Notificaciones"
        ],
        "summary": "Obtener preferencias de notificaci贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Preferencias de notificaci贸n"
          }
        }
      },
      "put": {
        "tags": [
          "Notificaciones"
        ],
        "summary": "Actualizar preferencias de notificaci贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email_citas": {
                    "type": "boolean"
                  },
                  "email_resultados": {
                    "type": "boolean"
                  },
                  "email_promociones": {
                    "type": "boolean"
                  },
                  "sms_citas": {
                    "type": "boolean"
                  },
                  "sms_resultados": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Preferencias actualizadas"
          }
        }
      }
    },
    "/api/admin/users": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Listar todos los usuarios",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de usuarios"
          }
        }
      }
    },
    "/api/admin/users/{id}": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Ver detalle de usuario espec铆fico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle del usuario"
          }
        }
      },
      "put": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Actualizar datos de usuario",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario actualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Desactivar usuario",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario desactivado"
          }
        }
      }
    },
    "/api/admin/users/medico": {
      "post": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Crear nuevo usuario m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "M茅dico creado"
          }
        }
      }
    },
    "/api/admin/users/recepcionista": {
      "post": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Crear nuevo recepcionista",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Recepcionista creado"
          }
        }
      }
    },
    "/api/admin/users/admin": {
      "post": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Crear nuevo administrador",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Administrador creado"
          }
        }
      }
    },
    "/api/admin/doctors": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Listar todos los m茅dicos",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de m茅dicos"
          }
        }
      },
      "post": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Crear nuevo m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "M茅dico creado"
          }
        }
      }
    },
    "/api/admin/doctors/{id}": {
      "delete": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Desactivar m茅dico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "M茅dico desactivado"
          }
        }
      }
    },
    "/api/admin/doctors/migration/status": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Estado de migraci贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de migraci贸n"
          }
        }
      }
    },
    "/api/admin/doctors/migration/execute": {
      "post": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Ejecutar migraci贸n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Migraci贸n ejecutada"
          }
        }
      }
    },
    "/api/admin/recepcionistas": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Listar recepcionistas",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de recepcionistas"
          }
        }
      }
    },
    "/api/admin/admin": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Listar administradores",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de administradores"
          }
        }
      }
    },
    "/api/admin/stats": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Estad铆sticas generales del sistema",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estad铆sticas del sistema"
          }
        }
      }
    },
    "/api/admin/logs": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Obtener logs del sistema",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Logs del sistema"
          }
        }
      }
    },
    "/api/admin/appointments": {
      "get": {
        "tags": [
          "Administraci贸n"
        ],
        "summary": "Ver todas las citas",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de todas las citas"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Sistema",
      "description": "Endpoints del sistema y estado de la API"
    },
    {
      "name": "Autenticaci贸n",
      "description": "Registro, login y gesti贸n de autenticaci贸n"
    },
    {
      "name": "Autenticaci贸n MFA",
      "description": "Autenticaci贸n de dos factores (2FA)"
    },
    {
      "name": "Perfil de Usuario",
      "description": "Gesti贸n del perfil del usuario autenticado"
    },
    {
      "name": "Contactos de Emergencia",
      "description": "Gesti贸n de contactos de emergencia del usuario"
    },
    {
      "name": "Informaci贸n M茅dica",
      "description": "Gesti贸n de informaci贸n m茅dica personal"
    },
    {
      "name": "Usuarios (Legacy)",
      "description": "Gesti贸n legacy de usuarios (compatibilidad)"
    },
    {
      "name": "M茅dicos",
      "description": "Consulta de informaci贸n de m茅dicos disponibles"
    },
    {
      "name": "Especialidades",
      "description": "Consulta de especialidades m茅dicas"
    },
    {
      "name": "Citas M茅dicas",
      "description": "Gesti贸n de citas m茅dicas para usuarios"
    },
    {
      "name": "Recepcionistas",
      "description": "Funcionalidades espec铆ficas para recepcionistas (gesti贸n integral)"
    },
    {
      "name": "Ex谩menes M茅dicos",
      "description": "Gesti贸n completa de ex谩menes m茅dicos"
    },
    {
      "name": "Conversaciones",
      "description": "Sistema de mensajer铆a entre usuarios y m茅dicos"
    },
    {
      "name": "Notificaciones",
      "description": "Gesti贸n de notificaciones y preferencias"
    },
    {
      "name": "B煤squeda",
      "description": "Funcionalidades de b煤squeda avanzada"
    },
    {
      "name": "Administraci贸n",
      "description": "Funcionalidades administrativas del sistema"
    },
    {
      "name": "Notificaciones",
      "description": "Sistema de notificaciones"
    },
    {
      "name": "Mensajer铆a",
      "description": "Sistema de mensajer铆a entre pacientes y m茅dicos"
    },
    {
      "name": "B煤squeda",
      "description": "B煤squeda avanzada de m茅dicos y ex谩menes"
    },
    {
      "name": "Administraci贸n",
      "description": "Endpoints administrativos (solo para admins)"
    }
  ]
}